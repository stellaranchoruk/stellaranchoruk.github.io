<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Stellar Wallet Kit Final Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- ✅ Correct CSS from unpkg CDN -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/@creit.tech/stellar-wallets-kit@1.7.5/dist/index.css"
  />
</head>
<body style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; margin:0; font-family:sans-serif;">

  <h1>Stellar Wallets Kit Demo</h1>
  <button id="connect-btn"
          style="padding:.75rem 1.5rem;font-size:1rem;border:none;background:#4a4a4a;color:#fff;border-radius:4px;cursor:pointer;">
    Connect with Stellar
  </button>

  <!-- ✅ Correct UMD script from unpkg CDN -->
  <script
    src="https://unpkg.com/@creit.tech/stellar-wallets-kit@1.7.5/dist/index.umd.min.js"
    defer
  ></script>

  <script>
    // Wait for UMD to load
    document.addEventListener('DOMContentLoaded', () => {
      const { StellarWalletsKit, WalletNetwork, allowAllModules } = window.StellarWalletsKitLib;

      const kit = new StellarWalletsKit({
        network: WalletNetwork.PUBLIC,
        modules: allowAllModules()
      });

      document.getElementById('connect-btn').addEventListener('click', () => {
        kit.openModal({
          modalTitle: 'Select a Stellar Wallet',
          notAvailableText: 'No Stellar wallets found. Please install Freighter or another supported wallet.',
          onWalletSelected: async (opt) => {
            await kit.setWallet(opt.id);
            const { address } = await kit.getAddress();
            console.log('✅ Connected:', opt.id, address);
            alert(`Connected with ${opt.id}:\n${address}`);
          },
          onClosed: (err) => {
            if (err) alert('Wallet modal closed or errored');
          }
        });
      });
    });
  </script>
</body>
</html>
