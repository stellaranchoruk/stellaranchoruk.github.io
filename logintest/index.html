<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Stellar Wallets Kit UMD Demo</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  
  <!-- UMD bundle: exposes StellarWalletsKitLib -->
  <script
    src="https://cdn.jsdelivr.net/npm/@creit.tech/stellar-wallets-kit@1.7.5/dist/index.umd.min.js"
    defer
  ></script>
  <!-- (You can drop in the CSS if you find the correct path later) -->
</head>
<body style="display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;margin:0;font-family:sans-serif;">

  <h1>Stellar Wallets Kit UMD Demo</h1>
  <button id="connect-btn"
          style="padding:.75rem 1.5rem;font-size:1rem;border:none;background:#4a4a4a;color:#fff;border-radius:4px;cursor:pointer;">
    Connect with Stellar
  </button>

  <script>
    // Wait for the UMD bundle to load (defer ensures this runs after)
    document.addEventListener('DOMContentLoaded', () => {
      // Grab the Kit from the global
      const {
        StellarWalletsKit,
        WalletNetwork,
        allowAllModules
      } = StellarWalletsKitLib;

      // Instantiate on PUBLIC network with every built-in module
      const kit = new StellarWalletsKit({
        network: WalletNetwork.PUBLIC,
        modules: allowAllModules()
      });

      // Open the modal on button click
      document.getElementById('connect-btn').addEventListener('click', () => {
        kit.openModal({
          modalTitle: 'Select a Stellar Wallet',
          notAvailableText: 'No wallets found. Please install Freighter or another supported wallet.',
          onWalletSelected: async (opt) => {
            await kit.setWallet(opt.id);
            const { address } = await kit.getAddress();
            alert(`Connected!\n${opt.id}: ${address}`);
          },
          onClosed: (err) => {
            if (err) alert('Modal closed or no wallets available');
          }
        });
      });
    });
  </script>
</body>
</html>
